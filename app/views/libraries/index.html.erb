<header>
	<h1 class="index-page-header">Libraries</h1>
	
	<ul class="actions">
		<%= render partial: "application_partials/auth_new_record", locals: {model_class: Library} %>
	</ul>	
</header>

<table class="attributes">
  <thead>
    <tr>
			<th>Name</th>
			<th>Creator</th>
			<th>Date created</th>
			<th>Sequencing Library Prep Kit</th>
			<th>Paired End</th>
      <th>Nucleic acid term</th>
      <th>Biosample</th>
      <th>Vendor</th>
      <th>Lot identifier</th>
      <th>Barcode</th>
			<th>Paired Barcode</th>
      <th>Library fragmentation method</th>
			<th>Concentration</th>
      <th>Size range</th>
      <th>Strand specificity</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @libraries.each do |rec| %>
      <tr>
				<td><%= link_to rec.name, rec %></td>
				<td><%= rec.user.display() %></td>
				<td><%= time_ago_in_words(rec.created_at) %> ago </td>
				<td><%= link_to rec.sequencing_library_prep_kit.name, rec.sequencing_library_prep_kit %></td>
				<td><%= rec.paired_end %></td>
        <td><%= rec.nucleic_acid_term.name %></td>
        <td><%= link_to rec.biosample.name, rec.biosample %></td>

        <% if rec.vendor.present? %>
          <td><%= rec.vendor.name %></td>
        <% else %>
          <td></td>
        <% end %>
  
        <td><%= rec.lot_identifier %></td>
        
        <!-- Either a barcode or a paired_barcode can be present, not both -->
				<% if rec.barcode.present? %>
					<td><%= render partial: "barcodes/link_to_barcode", locals: {barcodes: [rec.barcode]} %></td>
				<% else %>
					<td></td>
				<% end %>

				<% if rec.paired_barcode.present? %>
					<td><%= render partial: "paired_barcodes/link_to_paired_barcode", locals: {paired_barcodes: [rec.paired_barcode]} %></td>
				<% else %>
					<td></td>
				<% end %>

				<% if rec.library_fragmentation_method.present? %>
	        <td><%= link_to rec.library_fragmentation_method.name, rec.library_fragmentation_method.name %></td>
				<% else %>
					<td></td>
				<% end %>
				<% if rec.concentration.present? %>
					<td><%= rec.concentration %>&nbsp;<%= rec.concentration_unit.name %></td>
				<% else %>
					<td></td>
				<% end %>
        <td><%= rec.size_range %></td>
        <td><%= rec.strand_specific %></td>
        <td>
					<%= link_to fa_icon("pencil"), edit_library_path(rec) %>
        	<%= link_to fa_icon("trash"),rec, method: :delete, data: { confirm: 'Are you sure?' } %>
				</td>
      </tr>
    <% end %>
  </tbody>
</table>
