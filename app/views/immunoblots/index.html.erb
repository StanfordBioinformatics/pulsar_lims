<header>
  <h1 class="index-page-header">
    <%= @title || "Immunoblots" %>
  </h1>
  <p class="model-definition"><%= Immunoblot::DEFINITION %></p>

  <ul class="actions">
    <%= render partial: "application_partials/auth_new_record" %>
  </ul>
</header>

<table class="attributes index">
  <thead>
    <tr>
      <%= render partial: "application_partials/index_common_table_headers" %>
      <th>Date performed</th>
      <th>Analyst</th>
      <th>Primary antibody</th>
      <th>Primary antibody conc.</th>
      <th>Secondary antibody</th>
      <th>Secondary antibody conc.</th>
      <th>Agarose gel</th>
      <th>Submitter comments</th>
      <th>Notes</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @records.each do |rec| %>
      <tr>
        <%= render partial: "application_partials/index_common_table_cells", locals: {record: rec} %>
        <td><%= rec.date_performed %></td>
        <td><%= rec.analyst.display() %></td>
        <td><%= rec.primary_antibody.name %></td>
        <td>
          <% if rec.primary_antibody_concentration.present? %>
            <%= "#{rec.primary_antibody_concentration} #{rec.primary_antibody_concentration_units.name}" %>
          <% end %>
        </td>
        <td><%= rec.secondary_antibody.name %></td>
        <td>
          <% if rec.secondary_antibody_concentration.present? %>
            <%= "#{rec.secondary_antibody_concentration} #{rec.secondary_antibody_concentration.name}" %>
          <% end %>
        </td>
        <td>
          <% if rec.agarose_gel.present? %>
            <div style="display: flex">
              <%= link_to rec.agarose_gel.display(), rec.agarose_gel %>
              <% if rec.agarose_gel.gel_image.present? %>
                <%= image_tag rec.agarose_gel.gel_image, alt: "gel", data: {"caption": rec.agarose_gel.caption}, class: "modal-for-image", style: "margin-left: 0.3em; max-width: 50px; max-height: 50px; object-fit: contain;" %>
              <% end %>
            </div>
          <% end %>
        </td>
        <td><%= rec.submitter_comments %></td>
        <td><%= rec.notes %></td>
        <td>
          <%= link_to fa_icon("pencil"), edit_immunoblot_path(rec) %>
          <%= link_to fa_icon("trash"), rec, method: :delete, data: { confirm: 'Are you sure?' } %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
