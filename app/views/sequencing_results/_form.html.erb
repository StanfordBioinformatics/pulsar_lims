<%= f.association :sequencing_run, as: :hidden %>

<% if @sequencing_result.persisted? %>
<!-- Then this form is being used for editing and we need to allow the user to change the library and the barcode.
								 We also need to set the library and barcode selectors to what the current values are as a default.
						-->
	<% libs = @sequencing_request.libraries %>
	<% library_selected = @sequencing_result.library.id %>
	<% barcodes = @sequencing_run.get_barcodes_on_request() %>
	<% selected_barcode = @sequencing_result.library.get_indexseq.id %>
<% else %>
	<% libs = @sequencing_run.get_libraries_without_sequencing_results %>
	<% barcodes = @sequencing_run.get_barcodes_on_request(without_sequencing_result=true) %>
	<% selected_library = nil %>
	<% selected_barcode = nil %>
<% end %>

<% include_blank = false %>
<% if libs.length > 1 %>
	<% include_blank = true %>
<% end %>

<%= f.association :library, collection: libs.map {|x| [x.name, x.id]}, selected: library_selected, include_blank: include_blank, input_html: { id: "sequencing_result_library_id" } %>

<%= f.input :barcode_id, as: :select,  collection: barcodes.map {|x| [x.display,x.id]}, selected: selected_barcode, include_blank: include_blank, input_html: { id: "sequencing_result_barcode_id" } %>
	
<%= f.input :read1_count %>
	
<%= f.input :read1_uri %>
	
<% if @sequencing_request.paired_end? %>
	<%= f.input :read2_count %>
	<%= f.input :read2_uri %>
<% end %>
<%= f.input :comment %>
