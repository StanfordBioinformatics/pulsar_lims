<%= render partial:  "application_partials/header", locals: {rec: @gel } %>

<span id="record_id" style="display: none;"><%= @gel.id %></span>

<table class="attributes">
  <tr>
    <% if @gel.immunoblot.present? %>
      <th><strong>Immunoblot:</strong></th>
      <td>
        <%= link_to_record(@gel.immunoblot) %>
      </td>
    <% elsif @gel.pcr.present? %>
      <th><strong>PCR:</strong></th>
      <td>
        <%= link_to_record(@gel.pcr) %>
      </td>
    <% end %>
  </tr>
  
  <tr>
    <th><strong>Percent agarose:</strong></th>
    <td><%= "#{@gel.percentage}%" %></td>
  </tr>

  <tr>
    <th><strong>Run date:</strong></th>
    <td><%= @gel.run_date %></td>
  </tr>

  <tr>
    <th><strong>Caption:</strong></th>
    <td><%= simple_format(@gel.caption) %></th>
  </tr>

  <tr class="notes-row">
    <th><strong>Notes:</strong></th>
    <td><%= @gel.notes %></td>
  </tr>
</table>

<h3 class="section">Gel images</h3>
<%= link_to "Add Image", add_gel_image_gel_path(@gel), class: "reg-btn" %>
</br>
<% @gel.gel_images.each do |i| %>
  <div style="display: flex; align-items: center;" %>
    <div>
      <%= link_to_record i %>
    </div>
    <%= image_tag i.image, alt: "Gel image", class: "modal-for-image", style: "width: 100px; margin-left: 1em;" %>
  </div>
<% end %>

<h4 class="section">Gel lanes</h4>

<div style="overflow: auto; max-width: 95%;">
  <%= render partial: "gel_lanes/headers" %>
  <div class="gel-lanes" %>
    <% @gel.gel_lanes.order(:lane_number).each do |lane| %>
      <% @gel_lane = lane %>
      <%= render partial: "gels/add_lane" %>
    <% end %>
  </div>
</div>
</br>

<!-- Hidden form that is used when the user tries to edit the 'notes'. -->                             
<%= render partial: "application_partials/edit_notes", locals: {rec: @gel} %> 

<%= link_to "Add lane", add_lane_gel_path(@gel), class: "add-gel-lane-btn reg-btn", remote: true %>

</br></br>
<%= link_to 'Back', gels_path %>
