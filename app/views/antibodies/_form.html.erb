<%= simple_form_for(@antibody) do |f| %> <% if @antibody.errors.any? %> <div id="error_explanation">
      <h2><%= pluralize(@antibody.errors.count, "error") %> prohibited this antibody from being saved:</h2>

      <ul>
      <% @antibody.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :name %> (Max. 20 characters)

	<% organism_id = nil %>
	<% if not @antibody.organism.nil? %>
		<% organism_id = @antibody.organism.id %>
	<% end %>
  <%= f.input :organism_id, collection: sorted_organism_name_id(), selected: organism_id, prompt: "Select the Organism" %>

	<% if @antibody.new_record? %>
		None
	<% else %>
		<table>
			<% @antibody.antibody_purifications.each do |p| %>
				<tr>
					<td><%= link_to(p.name,p) %></td>
					<td> Remove: <input type="checkbox" name="remove_antibody_purifications[]" value=<%= p.id %> /></td>
				</tr>
			<% end %>
		</table>
	<% end %>

  <!-- Show select for AntibodyPurifications. Mutliple can be selected.
       If the form was rejected due to a validation error, then the
       user will have been presented with this form again to correct it, 
       and I set the default selectioned to what the user had originally, 
       if any. -->
  <% selected = nil %>
  <% if @antibody.antibody_purifications and @antibody.new_record? %>
    <% selected = @antibody.antibody_purifications.map{|x| x.id} %>
  <% end %>
  <%= render(partial: "antibody_purifications/select_antibody_purifications", locals: {f: f,selected: selected}) %>


  <% vendor_id = nil %>
  <% if not @antibody.vendor.nil? %>
    <% vendor_id = @antibody.vendor.id %>
  <% end %>
  <%= f.input :vendor_id, collection: sorted_vendor_name_id(), selected: vendor_id, prompt: "Select the Vendor" %>

	<% isotype_id = nil %>
	<% if not @antibody.isotype.nil? %>
		<% isotype_id = @antibody.isotype.id %>
	<% end %>
  <%= f.input :isotype_id, collection: sorted_isotype_name_id(), selected: isotype_id, prompt: "Select the Isotype" %>

	<% gene_id = nil %>
	<% if not @antibody.human_gene.nil? %>
		<% gene_id = @antibody.human_gene.id %>
	<% end %>
  <%= f.input :human_gene_id, collection: sorted_gene_name_id(), selected: gene_id, prompt: "Select the Human Gene" %>

  <%= f.input :vendor_product_identifier %>

  <%= f.input :vendor_product_url %>
    
  <%= f.input :lot_identifier %>

  <%= f.input :clonality, collection: Antibody::CLONALITY_TYPES, prompt:  "Select the Clonality" %>

  <%= f.input :antigen_description %>

  <%= f.input :antigen_sequence %>

  <div class="actions">
    <%= f.button :submit, class: "btn-primary" %>
  </div></br></br>
<% end %>
