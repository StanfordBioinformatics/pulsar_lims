<%= simple_form_for(@antibody) do |f| %>
	<%= f.error_notification %>
  <% if @antibody.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@antibody.errors.count, "error") %> prohibited this antibody from being saved:</h2>

      <ul>
      <% @antibody.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <%= f.input :name %> (Max. 20 characters)

  <%= f.association :organism, collection: Organism.order(:name), label_method: :name, prompt: "Select the Organism" %>

	<table>
	<tr><th>Associated Antibody Purifications</th></tr>
	<%= f.simple_fields_for(:antibody_purifications) do |ff| %>
		<tr>
		<% antibody_purification = @antibody.antibody_purifications[ff.index] %>
		<td><%= antibody_purification.name %></td>
		<td><%= ff.input_field :_destroy, as: :boolean, label: "Remove" %></td>
		</tr>
	<% end %>
</table></br>

  <!-- Show select for AntibodyPurifications. Mutliple can be selected.
       If the form was rejected due to a validation error, then the
       user will have been presented with this form again to correct it, 
       and I set the default selectioned to what the user had originally, 
       if any. -->
  <%= render(partial: "antibody_purifications/select_antibody_purifications", locals: {f: f}) %>

  <%= f.association :vendor, collection: Vendor.order(:name), label_method: :name, prompt: "Select the Vendor" %>

  <%= f.association :isotype, collection: Isotype.order(:name), label_method: :name, prompt: "Select the Isotype" %>

  <%= f.association :target, collection: Target.order(:name), label_method: :name, prompt: "Select the Target" %>

  <%= f.input :vendor_product_identifier %>

  <%= f.input :vendor_product_url %>
    
  <%= f.input :lot_identifier %>

  <%= f.input :clonality, collection: Antibody::CLONALITY_TYPES, prompt:  "Select the Clonality" %>

  <%= f.input :antigen_description %>

  <%= f.input :antigen_sequence %>

  <div class="actions">
    <%= f.button :submit, class: "btn-primary" %>
  </div></br>
<% end %>
